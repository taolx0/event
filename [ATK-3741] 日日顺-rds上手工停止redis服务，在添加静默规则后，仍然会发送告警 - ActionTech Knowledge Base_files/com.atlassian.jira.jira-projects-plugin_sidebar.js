;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar', location = '/sidebar/sidebar-init.js' */
define("jira/projects/sidebar/sidebar-initializer",["require"],function(d){var l=d("jira/util/logger");var c=d("jira/api/projects");var h=d("jira/api/projects/sidebar");var m=d("jira/project/types/warning/dialog");var j=d("jira/projects/sidebar/lastvisited/updater");var b=d("jira/projects/sidebar/component");var a=d("jira/projects/sidebar/analytics/analytics");var i=d("jira/projects/sidebar/analytics/hash");var g=d("wrm/context-path");var n=d("jquery");var k=d("underscore");var f=["NONE","com.atlassian.jira.jira-projects-plugin:project-issue-search-link","com.atlassian.jira.jira-projects-plugin:components-page","com.atlassian.jira.jira-projects-plugin:reports-panel","com.atlassian.jira.jira-projects-plugin:summary-panel","com.atlassian.jira.jira-projects-plugin:summary-page","com.atlassian.jira.jira-projects-plugin:components-page","com.atlassian.jira.jira-projects-plugin:release-page","com.atlassian.jira.jira-projects-plugin:release-sidebar-version-","com.atlassian.jira.jira-projects-plugin:report-page","com.pyxis.greenhopper.jira:global-sidebar-report","com.pyxis.greenhopper.jira:global-sidebar-plan-scrum","com.pyxis.greenhopper.jira:global-sidebar-work-scrum","com.pyxis.greenhopper.jira:global-sidebar-work-kanban","com.pyxis.greenhopper.jira:project-sidebar-plan-scrum","com.pyxis.greenhopper.jira:project-sidebar-work-scrum","com.pyxis.greenhopper.jira:project-sidebar-work-kanban","com.atlassian.jira.jira-projects-issue-navigator:embedded-issue-navigator-link","com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator"];var e=function(s){function p(u){var t=n(".aui-sidebar .aui-badge");t.tooltip({gravity:"w"});if(u.isCollapsed()){t.tooltip("disable")}u.on("collapse-end expand-end",function(){n(".tipsy").remove();n(".aui-sidebar .aui-badge").tooltip("toggleEnabled")})}function q(u){function t(){u.getAUISidebar().reflow()}setTimeout(t,200);setInterval(t,5*60*1000)}function r(t){t.on("collapse-start",function(){var u=t.$el.find(".scope-filter-trigger");if(u.hasClass("aui-dropdown2-active")){u.trigger("aui-button-invoke")}})}function o(){m.init({onProjectTypeChanged:function(){var t=c.getCurrentProjectKey();window.location.replace(g()+"/projects/"+t+"/summary")}});l.trace("project.types.warning.messages.init")}h.initAPI(new b({el:s.$el[0]}));k(f).each(i.addPrefix);a.register();r(s);p(s);o();h.getSidebar().done(function(t){q(t);j.start(t)})};return{init:e}});;